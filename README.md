# far-gvfs (gvfspanel)

Альфа-версия, **не для повседневного использования!**

_Только для особо интересующихся._

Очень простое дополнение к far2l (https://github.com/elfmz/far2l). Обертка
вокруг GVFS. Позволяет монтировать сетевые ресурсы в виде виртуальных файловых
систем. Поддерживаются те протоколы, которые поддерживаются GVFS (SFTP,
WebDAV, SMB и др.).

### Лицензия: MIT

Использован код из https://github.com/invy/far2l/tree/gvfs/gvfspanel.

## Зависимости

* gtkmm-3.0 (возможно, будет работать и с более ранней 2 версией);
* libuuid.

Установки зависимостей сборки в Debian (Ubuntu):

apt-get install gtkmm-3.0-dev uuid-dev

Для сборки дополнение помещается в дерево исходного кода far2l в виде
поддиректории, например, если код far2l развернут в директорию "far2l",
то код far-gvfs помещается в "far2l/far-gvfs". Затем директорию добавляют
в проектный файл "CMakeLists.txt" far2l:

```
...
add_subdirectory (align)
add_subdirectory (autowrap)
add_subdirectory (drawline)
add_subdirectory (far-gvfs)
...
```

Дополнение будет собрано и подготовлено к установке вместе с прочими
дополнениями far2l, входящими в его состав.

Для работы дополнения в целевой ОС должна быть установлена gtkmm, поддержка
GVFS и libuuid (пакет libuuid1 в Debian).

## Возможности

Для монтирования сетевых ресурсов необходимо указать URL ресурса, учетную
запись и пароль для нужд авторизации. Анонимное монтирование возможно, и
попытки анонимного подключения выполняются, если и учетная запись, и пароль
_не указаны_ . Указание пароля "на лету" в текущей версии _не поддерживается_ .
В случае возникновения каких-либо ошибок подключения выдается
сообщение о них в том виде, в котором его предоставляет GVFS. В случае
удачного завершения операции панель gvfs переключается на вновь
подмонтированный ресурс.

В соответствии с философией GVFS ресурсы остаются подмонтированными в
продолжение всего текущего сеанса работы с far2l и отключаются при завершении
работы с ним. Если запущено более одного экземпляра far2l, то они пользуются
общим (системным) пулом смонтированных ресурсов. Таким образом, разрешение
всех возможных конфликтов в работе с ресурсами оставлено средствам самой GVFS.

Данные о сетевых ресурсах хранятся в реестре far2l в ветке
"Software/Far2/gvfspanel/Resources".

Дополнение добавляется в меню выбора устройств far2l под именем "gvfs", а
также в меню конфигурации и команд дополнений. Однако, параметры конфигурации
у far-gvfs в настоящее время отсутствуют. Единственная команда -- переключение
текущей панели на панель самого дополнения.
